# 维护信息

|序号|版本|发布人|修改原因即说明|日期|
|-|-|-|-|-|
|1|v0.0|沈正昊|架构调整，核心代码封装C语言，python接口|2020年11月25日|

# 模型依赖

## 运行环境

模型以python为数据及调用接口，C语言封装核心代码的架构组装的。

故运行核心代码需要linux下C语言运行环境（一般linxu发行版具备）以及python3运行环境。

除此之外，还需要以下第三方python包依赖：

1. ctypes，time，io，sys，os包；
2. python读取/写入数据的包

## 数据输入

### 模型参数

主要是根据历史经验以及国家发布的统计信息求算的模型参数，包括：

1. 转化率及缴费参数
    |参数名|参数释义|
    |-|-|
    |SEX|性别：1=男；2=女|
    |AGE|年龄：范围0~119岁|
    |CLASS|人员类别|
    |c_rate|扣除[死亡率](#mortality)的最终转化率。若无变化，则为 $1$|
    |ACCT_TOT|该性别,年龄,人员类别下个帐缴费比例|
    |FUND_TOT|该性别,年龄,人员类别下统筹缴费比例|
2. 基础年度人口参数
    |参数名|参数释义|
    |-|-|
    |SEX|性别：1=男；2=女|
    |AGE|年龄：范围0~119岁|
    |CLASS|人员类别|
    |EXPOSURE|基础年度下该性别,年龄,人员类别的人数|
3. 缴费相关参数
    |参数名|参数释义|
    |-|-|
    |SEX|性别：1=男；2=女|
    |AGE|年龄：范围0~119岁|
    |CLASS|人员类别|
    |SVC_TYPE|就诊类别|
    |OCCURRENCE_RATE|人均就诊率|
    |CHG_PER_TIME|次均费用|
    |COVERED_RATIO|可报销费用比例|
    |PAID_RATIO|实际支付费用占可报销费用比例|
4. 死亡率（生命表）
   |参数名|参数释义|
   |-|-|
   |SEX|性别：1=男；2=女|
   |AGE|年龄：范围0~119岁|
   |qx|死亡率|

### 用户输入

#### 筹资参数

1. 830
   |参数名|参数释义|
   |-|-|
   |FORT_YEAR|预测_年度|
   |PSN_TYPE|人员_类别|
   |PSN_CLCTSTD|个人_缴费基数|
   |CO_CLCTSTD|公司_缴费基数|
   |PSN_CLCTPROP|个人_缴费比例|
   |CO_CLCTPROP|公司_缴费比例|
   |PSN_ACCTFUND_CLCTPROP|个人_个人账户基金_缴费_比例|
   |CO_ACCTFUND_CLCTPROP|公司_个人账户基金_缴费_比例|
   |ACCTFUND_CLCTSTD|个人账户基金_缴费_基数|
   |ACCTFUND_CLCTPROP|个人账户基金_缴费_比例|
   |SOCA_AVESAL|社会_平均工资|
   |SOCA_AVESAL_GROW|社会_平均工资_增长|
   |RSDT_CLCTPROP|居民_缴费比例|
   |FINSUBS|财政补贴|
   |PSN_CLCT|个人_缴费|

2. 715
   |参数名|参数释义|
   |-|-|
   |FORT_YEAR|预测_年度|
   |PSN_TYPE|人员_类别|
   |SOCA_AVESAL|社会_平均工资|
   |SOCA_AVESAL_GROW|社会_平均工资_增长|
   |PERPSN_DSPO_INC|人均_可支配_收入|
   |PERPSN_DSPO_INC_GROW|人均_可支配_收入_增长|

#### 理赔参数

1. 830
   |参数名|参数释义|
   |-|-|
   |FORT_YEAR|预测_年度|
   |PSN_TYPE|人员_类别|
   |MDTRT_TYPE|就诊_类别|
   |MDTRT_RATE_GROW|就诊_率_增长|
   |AVG_FEE_GROW|次均_费用_增长|
   |COVR_PROP_GROW|覆盖_比例_增长|
   |REIM_RAT_GROW|报销_比例_增长|

2. 715
   |参数名|参数释义|
   |-|-|
   |FORT_YEAR|预测_年度|
   |GDP|GDP|
   |GDP_GROW|GDP_增长|

#### 退休年龄调整

|参数名|参数释义|
|-|-|
|FORT_YEAR|预测_年度|
|GEND|性别|
|RETR_AGE|退休_年龄|

#### 目标人口

|参数名|参数释义|
|-|-|
|FORT_YEAR|预测_年度|
|TOTL_POP|总_人口数|

## 数据输出

目前输出为整张表格，其中理赔相关根据就诊类别，会有多列。即“OCCURRENCE”，“TOT_CHARGE”，“TOT_COVERED”，“TOT_PAID”均会后缀“_TYPE”来表示其代表的就诊类型代码，并对每一种就诊类型都生成一列。

|参数名|参数释义|
|-|-|
|FORT_YEAR|预测_年度|
|GEND|性别|
|AGE|年龄|
|PSN_TYPE|人员_类别|
|POP|人口数|
|ACCTFUND_CLCT|个人账户基金_缴费|
|FUND_CLCT|基金_缴费|
|OTP_1|诊次_1|
|SUMFEE_1|总费用_1|
|INSCP_FEE_1|符合范围_费用_1|
|FUND_PAY_1|基金_支付_1|
|OTP_2|诊次_2|
|SUMFEE_2|总费用_2|
|INSCP_FEE_2|符合范围_费用_2|
|FUND_PAY_2|基金_支付_2|

# 常见错误

## Segmentation fault

主要原因是数组越界，最常见的问题为维度不符合程序规定，若出现该报错首先校对各个[输入参数](#数据输入)中的以下维度是有不在规定范围内的：

|定义|说明|
|-|-|
|性别|用于sum的维度，1=男性，2=女性|
|年龄|用于sum的维度，由于国家颁布生命表到105岁，故只统计0-105岁|
|人员类别|用于sum的维度，1=居民，2=少年儿童及大学生，R=退休及相关，W=在职及相关|
|就诊类别|用于sum的维度，1=门诊，2=住院|